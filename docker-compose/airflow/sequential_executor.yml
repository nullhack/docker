version: '3.6'
services:
    webserver:
        build: ../../src/airflow
        image: airflow:1.10.3
        restart: unless-stopped
        environment:
            - AIRFLOW__CORE__EXECUTOR=SequentialExecutor
            - AIRFLOW__CORE__LOAD_EXAMPLES=True
        ports:
            - 8080:8080
        healthcheck:
            test: curl -sf 0.0.0.0:8080/health | grep healthy
            interval: 60s
            timeout: 60s
            retries: 3
